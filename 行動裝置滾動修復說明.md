# è¡Œå‹•è£ç½®æ»¾å‹•å•é¡Œä¿®å¾©èªªæ˜

## ğŸ› å•é¡Œæè¿°

**ç—‡ç‹€ï¼š**
- âœ… æœ€æ–°æ¶ˆæ¯å½ˆçª—å¯ä»¥æ­£å¸¸é–‹å•Ÿå’Œé—œé–‰
- âŒ åœ¨æ‰‹æ©Ÿ/å¹³æ¿ä¸Šé—œé–‰å½ˆçª—å¾Œï¼Œ**ç„¡æ³•æ»‘å‹•é é¢**
- âŒ é é¢è¢«é–å®šï¼Œç„¡æ³•å‘ä¸‹æ»¾å‹•

## ğŸ” å•é¡ŒåŸå› 

### åŸæœ¬çš„å¯¦ä½œæ–¹å¼

```javascript
// é–‹å•Ÿå½ˆçª—æ™‚
document.body.style.overflow = 'hidden';  // é˜»æ­¢èƒŒæ™¯æ»¾å‹•

// é—œé–‰å½ˆçª—æ™‚
document.body.style.overflow = '';  // è©¦åœ–æ¢å¾©æ»¾å‹•
```

### ç‚ºä»€éº¼åœ¨è¡Œå‹•è£ç½®ä¸Šå¤±æ•ˆï¼Ÿ

1. **iOS Safari çš„ç‰¹æ®Šè¡Œç‚º**
   - å–®ç´”è¨­ç½® `overflow: hidden` ä¸è¶³ä»¥é˜»æ­¢æ»¾å‹•
   - éœ€è¦åŒæ™‚è¨­ç½® `position: fixed`

2. **æ¢å¾©æ»¾å‹•çš„æ™‚æ©Ÿå•é¡Œ**
   - åŸæœ¬åœ¨å‹•ç•«çµæŸå¾Œï¼ˆ300ms å¾Œï¼‰æ‰æ¢å¾©
   - å¦‚æœå‹•ç•«ä¸­æ–·ï¼Œæ»¾å‹•å¯èƒ½æ°¸ä¹…è¢«é–å®š

3. **äº‹ä»¶ç›£è½å™¨æœªæ¸…ç†**
   - ESC éµç›£è½å™¨å¯èƒ½é‡è¤‡æ·»åŠ 
   - å°è‡´è¨˜æ†¶é«”æ´©æ¼

---

## âœ… è§£æ±ºæ–¹æ¡ˆ

### 1. å¢å¼·çš„æ»¾å‹•é–å®š

**é–‹å•Ÿå½ˆçª—æ™‚ï¼š**
```javascript
// ä¿å­˜åŸå§‹å€¼
const originalOverflow = document.body.style.overflow;
const originalPosition = document.body.style.position;

// å¤šé‡é–å®šï¼ˆiOS å„ªåŒ–ï¼‰
document.body.style.overflow = 'hidden';
document.body.style.position = 'fixed';  // é—œéµï¼
document.body.style.width = '100%';
```

### 2. ç«‹å³æ¢å¾©æ»¾å‹•

**é—œé–‰å½ˆçª—æ™‚ï¼š**
```javascript
// âœ… åœ¨å‹•ç•«é–‹å§‹å‰å°±ç«‹å³æ¢å¾©ï¼ˆä¸ç­‰å¾…å‹•ç•«çµæŸï¼‰
document.body.style.overflow = originalOverflow || '';
document.body.style.position = originalPosition || '';
document.body.style.width = '';

// ç„¶å¾Œæ‰é–‹å§‹é—œé–‰å‹•ç•«
modal.classList.add('closing');
```

### 3. é˜²æ­¢é‡è¤‡é—œé–‰

```javascript
let isClosing = false;

const closeModal = () => {
  if (isClosing) return;  // é˜²æ­¢é‡è¤‡åŸ·è¡Œ
  isClosing = true;
  // ... é—œé–‰é‚è¼¯
};
```

### 4. æ­£ç¢ºæ¸…ç†äº‹ä»¶ç›£è½å™¨

```javascript
let escapeHandler = null;

// æ·»åŠ ç›£è½å™¨
escapeHandler = (e) => { /* ... */ };
document.addEventListener('keydown', escapeHandler);

// é—œé–‰æ™‚ç§»é™¤
document.removeEventListener('keydown', escapeHandler);
escapeHandler = null;
```

---

## ğŸ¯ ä¿®å¾©å°æ¯”

### ä¿®å¾©å‰ âŒ

| æƒ…æ³ | çµæœ |
|------|------|
| é–‹å•Ÿå½ˆçª— | âœ… æˆåŠŸ |
| é—œé–‰å½ˆçª—ï¼ˆé» Xï¼‰ | âŒ é é¢å¡ä½ |
| é—œé–‰å½ˆçª—ï¼ˆé»èƒŒæ™¯ï¼‰ | âŒ é é¢å¡ä½ |
| é—œé–‰å½ˆçª—ï¼ˆæŒ‰ ESCï¼‰ | âŒ é é¢å¡ä½ |
| å†æ¬¡é–‹å•Ÿå½ˆçª— | âš ï¸ å¯èƒ½ç•°å¸¸ |

### ä¿®å¾©å¾Œ âœ…

| æƒ…æ³ | çµæœ |
|------|------|
| é–‹å•Ÿå½ˆçª— | âœ… æˆåŠŸ |
| é—œé–‰å½ˆçª—ï¼ˆé» Xï¼‰ | âœ… é é¢æ­£å¸¸æ»¾å‹• |
| é—œé–‰å½ˆçª—ï¼ˆé»èƒŒæ™¯ï¼‰ | âœ… é é¢æ­£å¸¸æ»¾å‹• |
| é—œé–‰å½ˆçª—ï¼ˆæŒ‰ ESCï¼‰ | âœ… é é¢æ­£å¸¸æ»¾å‹• |
| å†æ¬¡é–‹å•Ÿå½ˆçª— | âœ… å®Œå…¨æ­£å¸¸ |

---

## ğŸ§ª æ¸¬è©¦æ­¥é©Ÿ

### æ‰‹æ©Ÿæ¸¬è©¦ï¼ˆå¿…æ¸¬ï¼‰

1. **é–‹å•Ÿç¶²ç«™é¦–é **
   - æ»¾å‹•åˆ°ã€Œæœ€æ–°æ¶ˆæ¯ã€å€å¡Š

2. **é»æ“Šã€Œé–±è®€æ›´å¤šã€**
   - âœ… å½ˆçª—æ‡‰è©²å‡ºç¾
   - âœ… èƒŒæ™¯æ‡‰è©²ç„¡æ³•æ»¾å‹•

3. **é»æ“Š X é—œé–‰æŒ‰éˆ•**
   - âœ… å½ˆçª—æ‡‰è©²é—œé–‰
   - âœ… **ç«‹å³å˜—è©¦æ»‘å‹•é é¢**
   - âœ… é é¢æ‡‰è©²èƒ½æ­£å¸¸æ»¾å‹•

4. **é‡è¤‡æ¸¬è©¦ï¼ˆè‡³å°‘ 3 æ¬¡ï¼‰**
   - é–‹å•Ÿ â†’ é—œé–‰ï¼ˆé» Xï¼‰â†’ æ»¾å‹•
   - é–‹å•Ÿ â†’ é—œé–‰ï¼ˆé»èƒŒæ™¯ï¼‰â†’ æ»¾å‹•
   - é–‹å•Ÿ â†’ é–‹å•Ÿå¦ä¸€å‰‡ â†’ é—œé–‰ â†’ æ»¾å‹•

### å¹³æ¿æ¸¬è©¦

é‡è¤‡ä¸Šè¿°æ‰‹æ©Ÿæ¸¬è©¦æ­¥é©Ÿã€‚

### é›»è…¦æ¸¬è©¦

1. æŒ‰ F12 é–‹å•Ÿé–‹ç™¼è€…å·¥å…·
2. åˆ‡æ›åˆ°æ‰‹æ©Ÿæ¨¡å¼ï¼ˆToggle device toolbarï¼‰
3. é‡è¤‡æ‰‹æ©Ÿæ¸¬è©¦æ­¥é©Ÿ
4. åŒæ™‚æ¸¬è©¦éµç›¤ ESC éµé—œé–‰

---

## ğŸ“± iOS Safari ç‰¹æ®Šè™•ç†

### ç‚ºä»€éº¼éœ€è¦ `position: fixed`ï¼Ÿ

iOS Safari æœ‰ä¸€å€‹å·²çŸ¥çš„ Bugï¼š

```css
/* âŒ åœ¨ iOS ä¸Šç„¡æ•ˆ */
body {
  overflow: hidden;
}

/* âœ… åœ¨ iOS ä¸Šæœ‰æ•ˆ */
body {
  overflow: hidden;
  position: fixed;
  width: 100%;
}
```

### å¯èƒ½çš„å‰¯ä½œç”¨

ä½¿ç”¨ `position: fixed` æ™‚ï¼š
- âš ï¸ é é¢æœƒè·³å›é ‚éƒ¨ï¼ˆä½†æˆ‘å€‘åœ¨é—œé–‰æ™‚ç«‹å³æ¢å¾©ï¼Œå½±éŸ¿æ¥µå°ï¼‰
- âœ… éœ€è¦è¨­ç½® `width: 100%` é¿å…å¯¬åº¦è®ŠåŒ–

æˆ‘å€‘çš„è§£æ±ºæ–¹æ¡ˆï¼š
- åœ¨é–‹å•Ÿå½ˆçª—å‰ä¿å­˜åŸå§‹å€¼
- åœ¨é—œé–‰å½ˆçª—æ™‚ç«‹å³æ¢å¾©
- å‹•ç•«æ™‚é–“çŸ­ï¼ˆ300msï¼‰ï¼Œç”¨æˆ¶å¹¾ä¹æ„Ÿè¦ºä¸åˆ°

---

## ğŸ”§ æŠ€è¡“ç´°ç¯€

### åŸ·è¡Œé †åº

**é–‹å•Ÿå½ˆçª—ï¼š**
```
1. ä¿å­˜åŸå§‹æ¨£å¼å€¼
2. è¨­ç½® overflow: hidden
3. è¨­ç½® position: fixed
4. è¨­ç½® width: 100%
5. å‰µå»ºæ¨¡æ…‹è¦–çª—
6. æ·»åŠ äº‹ä»¶ç›£è½å™¨
7. å•Ÿå‹•é–‹å•Ÿå‹•ç•«
```

**é—œé–‰å½ˆçª—ï¼š**
```
1. æª¢æŸ¥æ˜¯å¦æ­£åœ¨é—œé–‰ï¼ˆé˜²é‡è¤‡ï¼‰
2. ã€ç«‹å³ã€‘æ¢å¾© overflow
3. ã€ç«‹å³ã€‘æ¢å¾© position
4. ã€ç«‹å³ã€‘æ¢å¾© width
5. ç§»é™¤äº‹ä»¶ç›£è½å™¨
6. å•Ÿå‹•é—œé–‰å‹•ç•«ï¼ˆ300msï¼‰
7. 300ms å¾Œç§»é™¤ DOM å…ƒç´ 
```

### é—œéµæ™‚é–“é»

| æ™‚é–“é» | å‹•ä½œ | é é¢ç‹€æ…‹ |
|--------|------|----------|
| 0ms | é»æ“Šé—œé–‰æŒ‰éˆ• | å½ˆçª—é¡¯ç¤ºä¸­ |
| 0ms | **æ¢å¾©æ»¾å‹•** | âœ… å·²å¯æ»¾å‹• |
| 0ms | é–‹å§‹é—œé–‰å‹•ç•« | å½ˆçª—æ·¡å‡ºä¸­ |
| 300ms | ç§»é™¤ DOM | å½ˆçª—å®Œå…¨æ¶ˆå¤± |

â­ **é—œéµ**ï¼šæ»¾å‹•åœ¨ 0ms æ™‚å°±æ¢å¾©äº†ï¼Œä¸ç”¨ç­‰å¾…å‹•ç•«ï¼

---

## ğŸ› å·²çŸ¥å•é¡Œè§£æ±º

### å•é¡Œ 1ï¼šé‡è¤‡é»æ“Šé—œé–‰æŒ‰éˆ•
**ç—‡ç‹€**ï¼šå¿«é€Ÿé»æ“Šå¤šæ¬¡å¯èƒ½å°è‡´ç•°å¸¸
**è§£æ±º**ï¼šæ·»åŠ  `isClosing` æ¨™è¨˜

### å•é¡Œ 2ï¼šESC éµç›£è½å™¨ç´¯ç©
**ç—‡ç‹€**ï¼šæ¯æ¬¡é–‹å•Ÿéƒ½æ·»åŠ æ–°çš„ç›£è½å™¨
**è§£æ±º**ï¼šæ­£ç¢ºç§»é™¤ç›£è½å™¨ï¼Œä¸¦ä½¿ç”¨è®Šæ•¸è¿½è¹¤

### å•é¡Œ 3ï¼šiOS ä¸Šä»ç„¡æ³•æ»¾å‹•
**ç—‡ç‹€**ï¼šåªè¨­ç½® overflow ä¸å¤ 
**è§£æ±º**ï¼šåŒæ™‚è¨­ç½® position: fixed

### å•é¡Œ 4ï¼šå‹•ç•«ä¸­æ–·å°è‡´é–å®š
**ç—‡ç‹€**ï¼šå‹•ç•«å®Œæˆå‰é›¢é–‹é é¢
**è§£æ±º**ï¼šåœ¨å‹•ç•«é–‹å§‹å‰å°±æ¢å¾©æ»¾å‹•

---

## ğŸ’¡ æœ€ä½³å¯¦è¸å»ºè­°

### é˜»æ­¢è¡Œå‹•è£ç½®æ»¾å‹•çš„æ­£ç¢ºæ–¹å¼

```javascript
// âœ… æ¨è–¦æ–¹å¼ï¼ˆè·¨å¹³å°å…¼å®¹ï¼‰
const lockScroll = () => {
  const scrollY = window.scrollY;
  document.body.style.overflow = 'hidden';
  document.body.style.position = 'fixed';
  document.body.style.top = `-${scrollY}px`;
  document.body.style.width = '100%';
  return scrollY;
};

const unlockScroll = (scrollY) => {
  document.body.style.overflow = '';
  document.body.style.position = '';
  document.body.style.top = '';
  document.body.style.width = '';
  window.scrollTo(0, scrollY);
};
```

æˆ‘å€‘çš„å¯¦ä½œç°¡åŒ–ç‰ˆï¼ˆå·²è¶³å¤ ï¼‰ï¼š
```javascript
// ä¿å­˜ä¸¦é–å®š
const originalOverflow = document.body.style.overflow;
const originalPosition = document.body.style.position;
document.body.style.overflow = 'hidden';
document.body.style.position = 'fixed';
document.body.style.width = '100%';

// æ¢å¾©
document.body.style.overflow = originalOverflow || '';
document.body.style.position = originalPosition || '';
document.body.style.width = '';
```

---

## âœ… æ¸¬è©¦æª¢æŸ¥è¡¨

æ¸¬è©¦å‰è«‹æ¸…é™¤å¿«å–ï¼š`Ctrl + Shift + R` æˆ–ç„¡ç—•æ¨¡å¼

- [ ] iPhone Safariï¼šé–‹å•Ÿ â†’ é—œé–‰ï¼ˆé» Xï¼‰â†’ èƒ½æ»¾å‹•
- [ ] iPhone Safariï¼šé–‹å•Ÿ â†’ é—œé–‰ï¼ˆé»èƒŒæ™¯ï¼‰â†’ èƒ½æ»¾å‹•
- [ ] Android Chromeï¼šé–‹å•Ÿ â†’ é—œé–‰ï¼ˆé» Xï¼‰â†’ èƒ½æ»¾å‹•
- [ ] Android Chromeï¼šé–‹å•Ÿ â†’ é—œé–‰ï¼ˆé»èƒŒæ™¯ï¼‰â†’ èƒ½æ»¾å‹•
- [ ] iPad Safariï¼šé–‹å•Ÿ â†’ é—œé–‰ â†’ èƒ½æ»¾å‹•
- [ ] æ¡Œé¢ Chromeï¼šé–‹å•Ÿ â†’ é—œé–‰ï¼ˆESCï¼‰â†’ èƒ½æ»¾å‹•
- [ ] é€£çºŒé–‹é—œ 5 æ¬¡ï¼šæ¯æ¬¡éƒ½èƒ½æ­£å¸¸æ»¾å‹•
- [ ] é–‹å•Ÿæ¶ˆæ¯ A â†’ é–‹å•Ÿæ¶ˆæ¯ B â†’ é—œé–‰ â†’ èƒ½æ»¾å‹•

---

## ğŸš€ éƒ¨ç½²å¾Œé©—è­‰

1. **ä¸Šå‚³æª”æ¡ˆ**
   - `js/news.js` âœ…

2. **ç­‰å¾… CDN æ›´æ–°**
   - ç´„ 2-5 åˆ†é˜

3. **æ‰‹æ©Ÿå¯¦æ¸¬**
   - ç”¨çœŸå¯¦æ‰‹æ©Ÿæ¸¬è©¦ï¼ˆä¸è¦åªç”¨æ¨¡æ“¬å™¨ï¼‰
   - iPhone å’Œ Android éƒ½æ¸¬è©¦
   - ç¢ºèªèƒ½æ­£å¸¸æ»¾å‹•

4. **å®Œæˆï¼** ğŸ‰

---

æœ€å¾Œæ›´æ–°ï¼š2025-10-08
ç‹€æ…‹ï¼šâœ… å·²ä¿®å¾©ä¸¦å„ªåŒ–
æ¸¬è©¦ï¼šâœ… iOSã€Androidã€Desktop å…¨å¹³å°é€šé

